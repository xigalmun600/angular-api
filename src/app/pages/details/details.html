<!--
  Plantilla HTML del componente de la página de detalles (Details)
  Este archivo define la estructura visual del componente de detalles
  Muestra información detallada de una canción
-->

<!--
  Contenedor principal
  Clases de Bootstrap:
  - container: contenedor centrado con ancho máximo
  - mt-4: margen superior de 1.5rem
-->
<div class="container mt-4">
    <!--
      Enlace para volver a la página de búsqueda
      mb-2: margen inferior de 0.5rem
      routerLink="/search": enlace a la página de búsqueda
      btn-sm: botón pequeño
      btn-outline-secondary: botón con borde gris
    -->
    <div class="mb-2"><a routerLink="/search" class="btn btn-sm btn-outline-secondary">← Volver</a></div>
    
    <!--
      Indicador de carga
      @if(loading): se muestra solo cuando loading es true
      Clases de Bootstrap:
      - spinner-border: animación de carga circular
      - text-primary: color primario
    -->
    @if(loading){<div class="spinner-border text-primary"></div>}
    
    <!--
      Mensaje de error
      @if(error): se muestra solo cuando hay un error
      Clases de Bootstrap:
      - alert alert-danger: alerta de error
    -->
    @if(error){<div class="alert alert-danger">{{error}}</div>}
    
    <!--
      Tarjeta con información de la canción
      @if(song): se muestra solo si hay una canción cargada
      Clases de Bootstrap:
      - card: contenedor de tarjeta
    -->
    @if(song){
    <div class="card">
        <!--
          Encabezado de la tarjeta
          Clases de Bootstrap:
          - card-header: encabezado de tarjeta
          - d-flex: display flex
          - justify-content-between: distribuye el espacio entre elementos
        -->
        <div class="card-header d-flex justify-content-between">
            <!--
              Título de la canción
              h5: tamaño de encabezado 5
              m-0: margen 0
            -->
            <h3 class="h5 m-0">{{song.trackName}}</h3>
            
            <!--
              Botón para añadir/eliminar de favoritos
              btn-sm: botón pequeño
              (click): ejecuta toggleFavorite() al hacer clic
              Muestra '★ Quitar' si está en favoritos, '☆ Añadir' si no
            -->
            <button class="btn btn-sm" (click)="toggleFavorite()">{{isFavorite()?'★ Quitar':'☆ Añadir'}}</button>
        </div>
        
        <!--
          Cuerpo de la tarjeta
          Clases de Bootstrap:
          - card-body: cuerpo de tarjeta
        -->
        <div class="card-body">
            <!--
              Información de la canción
              strong: texto en negrita
            -->
            <p><strong>Artista:</strong> {{song.artistName}} <strong>Album:</strong> {{song.albumName}}
                <strong>Dur:</strong> {{song.duration}}s {{song.instrumental?'(Instr)':''}}</p>
            
            <!--
              Separador horizontal
              hr: línea horizontal
            -->
            <hr>
            
            <!--
              Sección de letra
              h6: tamaño de encabezado 6
            -->
            <h6>Letra</h6>
            
            <!--
              Preformateado para mostrar la letra
              style="white-space:pre-wrap": preserva espacios y saltos de línea
              Si no hay letra, muestra 'Sin letra.'
            -->
            <pre style="white-space:pre-wrap">{{song.plainLyrics || 'Sin letra.'}}</pre>
            
            <!--
              Sección de letra sincronizada (si existe)
              @if(song.syncedLyrics): se muestra solo si hay letra sincronizada
            -->
            @if(song.syncedLyrics){
            <!--
              Separador horizontal
              hr: línea horizontal
            -->
            <hr>
            
            <!--
              Título de la sección
              h6: tamaño de encabezado 6
            -->
            <h6>Sincronizada</h6>
            
            <!--
              Preformateado para mostrar la letra sincronizada
              style="white-space:pre-wrap": preserva espacios y saltos de línea
            -->
            <pre style="white-space:pre-wrap">{{song.syncedLyrics}}</pre>}
        </div>
    </div>}
</div>